<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Space Invaders</title>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
        <!--<link rel='stylesheet' type='text/css' href="http://fonts.googleapis.com/css?family=Ubuntu:400,700,400italic"/>-->
        <link rel="stylesheet" type="text/css" href="doxygen.css" title="default" media="screen,print" />
    </head>
    <body>
        <div id="content">
        	<h1>Space Invaders</h1>
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Space Invaders Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://raw2.github.com/rubenvanassche/Space-Invaders/master/docs/screenshot.png?token=619804__eyJzY29wZSI6IlJhd0Jsb2I6cnViZW52YW5hc3NjaGUvU3BhY2UtSW52YWRlcnMvbWFzdGVyL2RvY3Mvc2NyZWVuc2hvdC5wbmciLCJleHBpcmVzIjoxMzkwMjMzMDc5fQ%3D%3D--0a63b7da3c9e7b677a9972b143caeb3d01a006c8"  alt="Screenshot"/>
</div>
<h2>Introduction</h2>
<p>Welcome, to the Space Invaders project, in this docuemnt you find information about how to compile and run the application. Dependencies are SFML and off course a c++ complier+ linker.</p>
<p>The document describes what each class in the system represents, after that I explain my design choises.</p>
<p>The API is documented and can be found in the docs/html directory, open the index.html file and start reading.</p>
<h2>Functionality</h2>
<ul>
<li>Aliens, Guns, Walls</li>
<li>Basic Space Invaders gameplay</li>
<li>Levels</li>
</ul>
<h2>Compiling</h2>
<p>cmake . make make install</p>
<h2>Running</h2>
<p>After compiling: ./SpaceInvaders</p>
<h2>Generating The Documentation</h2>
<p>Change the following line in the CMakeLists.txt file at the root directory from: </p>
<pre class="fragment"># Documentation
SET(BUILD_DOCS FALSE)
</pre><p>To: </p>
<pre class="fragment"># Documentation
SET(BUILD_DOCS TRUE)
</pre><h2>The System</h2>
<h3>Some Names</h3>
<ul>
<li>Controllers : work between views and entities</li>
<li>Models : set's of entities</li>
<li>Entities : specific objects, storing information and having a interface for querying information</li>
<li>Views : objects connected to entities representing them to the user</li>
<li>Factories : systems to create Entities and views</li>
<li>SI(Space Invaders Element) : special container containing all the models, views and controllers which is being used through the whole system</li>
<li>Libraries : classes for building all above</li>
</ul>
<h3>Libraries</h3>
<p><b><a class="el" href="class_assets.html" title="Class for storing assets and getting them without making endless copies. ">Assets</a></b> A library which can hold textures and fonts so those can be loaded when needed and don't waste memory with endless copies of them.</p>
<p><b><a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> The base class for a <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>.</p>
<p><b><a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a></b> The base class for an <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>.</p>
<p><b><a class="el" href="class_factory.html" title="The library for Factories. ">Factory</a></b> The base class for a <a class="el" href="class_factory.html" title="The library for Factories. ">Factory</a>.</p>
<p><b><a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a></b> The base class for a <a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a>, an <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> which will be presented on screen and has special functions for that(location, move, collision detection, ...)</p>
<p><b><a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a></b> The Space Invaders Element</p>
<p><b><a class="el" href="class_size.html" title="The Size Class. ">Size</a></b> A class for representing a size with an width, height and point. Beter said : a box in 2D space.</p>
<p><b>Utilities</b> File with the util namespace with some useful utilities for the whole system.</p>
<p><b><a class="el" href="class_view.html" title="The Library for views. ">View</a></b> The base class for a <a class="el" href="class_view.html" title="The Library for views. ">View</a>.</p>
<h3>Controllers</h3>
<p>Each of the following controllers inherits the base controller and define some actions in the system.</p>
<p><b>Collision <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> Has only one function check() which is called each time after an update of all the elements(Aliens, Walls, Guns, ...) in the game. It will check if certain elements collide with each other and if so it will call the appropriate controller for handeling the collision.</p>
<p><b>Event <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> The event controller is called each time an event(keyboard touch) happens, it will determine what to do after the event. This means selection the right controller and function.</p>
<p><b><a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> Can be seen as the "main" controller, when the game is started the first controller to be called is the game controller. It has functions to build up the game(initiate all the elements), show the startscreen and the game over or game won screen. And of course it shows the screen where the game is played and gives all the events to the appropriate controllers.</p>
<p><b>Motion <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> The motion controller is the controller who moves the elements over the screen. Sometimes these elements are moved automatic, for example the aliens they will be moved each time a certain time passes by in the <a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>. Sometimes elements are moved by the user, for example the gun is getting moved when the event controller gets an left or right keyboard touch. The <a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> controller will receive the event and give it to the Event controller who decides to call the Motion controller to move the gun. Besides moving elements has the motion controller also the functions to shoot bullets. These are also automatic as manual by the user called.</p>
<p><b>Screen <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a></b> The screen controller handles the screen(window) provided. During one cycle of the game each view will be able to draw to the window. But these views won't be showed until the screen controller's redraw method is called from somewhere. It also handles the function to close the window.</p>
<h3>Entities</h3>
<p><b>Alien(ScreenEntity)</b> Represents the data from an alien, it looks just like an <a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a> from where it is inherited but has also a ticktock function which can be called by the view to show the appropriate image of the alien.</p>
<p><b>Bullet(ScreenEntity)</b> The bullet <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> represents an bullet on the screen, it knows from where it was fired and has also a special overloaded kill function which will find his view and remove it as soon as the bullet is killed. So we don't fill up our memory with unnecessary things.</p>
<p><b><a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a></b> The only entity which is not an screen entity holds information about the game such as the height and width of the game and the current level playing.</p>
<p><b>Gun(ScreenEntity)</b> Is almost the same as it's base Screen <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> class but needs to handle sometimes different so some functions are overloaded. It represents of course the player's gun.</p>
<p><b>Wall(ScreenEntity)</b> Probably the most boring <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>, it is just a <a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a> and nothing more.</p>
<h3>Factories</h3>
<p>This needs no extra information, factories are created for Aliens, Bullets, Guns and Walls. They will create a <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> and place it in the model container. After that a view is created and stored in the view container. The <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> and <a class="el" href="class_view.html" title="The Library for views. ">View</a> get linked to each other for futher information exchange and our new element is created.</p>
<h3>Views</h3>
<p>Each element(Aliens, Walls, Bullets, Guns) has it's own view. In this view the corresponding entity will be queried for information like the postion and width and height of the element. The appropriate texture for the element will be asked from the assets library and then the element will be drawn on the screen. If the assets library throws an exception because the image of the element can not be found, then the view will generate a geometric shape so the game can still be played.</p>
<p>Besides these elements views there are some other views:</p>
<p><b><a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> Ended <a class="el" href="class_view.html" title="The Library for views. ">View</a></b> Will be shown to the user when he won or lose the game. No images over here but fonts, when those fonts couldn't be found it will print the information to the console.</p>
<p><b>Info <a class="el" href="class_view.html" title="The Library for views. ">View</a></b> Yet another view linked to an Screen <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>, this little text in the left corner of the screen during playing will show the user's score and remaining lives.</p>
<p><b>Start Screen <a class="el" href="class_view.html" title="The Library for views. ">View</a></b> The first view the user get's to see when he starts the game, he can select a level and start the game.</p>
<h2>Design</h2>
<h3>Space Invaders Element</h3>
<p>Is being used in the whole system, some examples:</p>
<ul>
<li>Factories: each <a class="el" href="class_factory.html" title="The library for Factories. ">Factory</a> stores it's new created views and entities automatically in the right containers, <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> provides these containers.</li>
<li><a class="el" href="class_gun.html" title="The Gun Entity. ">Gun</a> <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>: needs to know the width of the window, so the gun doesn't go off the screen. The <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element gives it access to the game <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> which stores the game width. Also when the gun moves, the <a class="el" href="class_gun.html" title="The Gun Entity. ">Gun</a> <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> will update the position of the gun and immediately ask the screen controller to redraw the screen.</li>
<li>Event <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>: will at each event(keyboard touch) redirect to the appropriate function in the <a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a> using the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element.</li>
<li><a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>: can ask simply information about the game(mostly the current level) and also get the amount of lives the gun(player) has to see if the game is over. Also this information can be provided wit the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element.</li>
<li>The Motion <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>: works on large sets stored in <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a>, like the aliens.</li>
</ul>
<p>Through the system there can be found dozens of examples why <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> is very useful, but some remarks over here:</p>
<p><b>Hiding</b></p>
<p>The <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element doesn't provide hiding (yet). So let's say a controller isn't allowed to update the screen, it will be possible through the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element. Off course this can be controlled by a privileges system in <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a>. So that each time the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element is called the caller should ask for privileges and the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element can decide to give them, but that's for a further version.</p>
<p><b>Why do views not have access to the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element?</b></p>
<p>Views just need to know something about their connected <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>, nothing more.</p>
<p><b>Why the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element?</b></p>
<ul>
<li>It reduces the amount of parameters to be given in the constructor</li>
<li>In the whole system there is only one <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element, this limits the amount of stupid errors being made</li>
<li>It makes the code readable, for example to redraw the window the only thing todo id : this-&gt;si-&gt;controller-&gt;screen-&gt;redraw();</li>
<li>You have everything you need everywhere</li>
<li>Adding new functionality to the system is much easier by using si</li>
</ul>
<h3>MVC</h3>
<p>Though there are multiple interpretations of the MVC system mine work a little bit different then the most. Instead of defining the model as a class with entities in and defining functions in that class to work on these entities I just used a list with entities and defined it as model.</p>
<p><b>Why?</b></p>
<p>The default interpretation is great for the aliens, you can move them just by calling one function in the controller to the model and say move. The model will then decide how each alien should move but that's in my opinion not the function of the model, there is a controller for that. The model should store data and not work on data.</p>
<p>So the motion controller moves the aliens in my design, it calls on each alien <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> the move function. This move function accepts only 4 values : UP, DOWN, LEFT, RIGHT so the <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> can decide how much he has to move. This can come in handy when you want some Aliens to move faster then others. The computation is done by the controller and the only thing the entity should do is change it's position.</p>
<h3>Observer Pattern</h3>
<p>Also here I do it a little bit different, the observer pattern should be used to call the function to redraw the window with all the new elements on it. I haven't implemented a special observer class with notifiers.</p>
<p><b>Why?</b></p>
<p>One word SI(Space Invaders Element), this element is available through all controllers and Entities. So when some controller or entity decides the screen should be updated, it can call in the <a class="el" href="class_s_i.html" title="The Space Invaders Elements, the connection through the whole system. ">SI</a> element the screen controller where the window redraw function is defined. Actually this looks like the observer pattern but it isn't exactly it.</p>
<h3><a class="el" href="class_factory.html" title="The library for Factories. ">Factory</a> Pattern</h3>
<p>In the description of the project it was said we needed to use an abstract factory pattern, I used just a factory pattern.</p>
<p><b>Why?</b></p>
<p>I think an abstract factory pattern is too complex for this project, it will require a lot of classes and make the code more complex then it should be. The factory pattern has the same function as the abstract factory pattern but is much nicer. It has been used to create the different aliens(they have the same speed but a different name and image, raising the speed is just one line of code) and guns. Also each <a class="el" href="class_gun.html" title="The Gun Entity. ">Gun</a> and <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a> have a <a class="el" href="class_bullet.html" title="The Bullet Entity. ">Bullet</a> <a class="el" href="class_factory.html" title="The library for Factories. ">Factory</a> inside them to provide them at all time with bullets.</p>
<h3>Inheritance and polymorphism</h3>
<p>The whole system rests on inheritance: each controller, factory, view, entity inherits from a base library(class). Now I have to admit these libraries doesn't look so spectacular. A better example is the <a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a> it inherits from the <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a> and the <a class="el" href="class_gun.html" title="The Gun Entity. ">Gun</a>, <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a>, <a class="el" href="class_wall.html" title="Class representing the Wall Entity. ">Wall</a> and bullet entities inherit from it.</p>
<p>The <a class="el" href="class_screen_entity.html" title="The library for ScreenEntities(entities who should be displayed on the screen) ">ScreenEntity</a> declares some special functions for entities besides the base entity class. The children of this class sometimes just use these function but it get's more interesting when they get overloaded. A few examples:</p>
<ul>
<li>Move: this function is overloaded in <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a> <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>, when the <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a> is moved it will also update the ticktock which represents if the alien view should show an image of an open or closed alien. Also the gun has a modified move function which will stop moving the gun when it reaches the borders of the screen.</li>
<li>Kill: this function is overloaded in the bullet <a class="el" href="class_entity.html" title="The library for Entities. ">Entity</a>, when a bullet is killed it's appropriate view will be searched so it can be removed from the memory.</li>
</ul>
<p>Another example is the view library, this one defines a virtual draw function. Each view is overloading this function with it's own code. This makes it possible to draw a gun with rectangles and triangles provided by SFML. Th aliens will be drawn by provided images. Though all views work the same way, they are all called within the screen controller's redraw function by using the draw function from teh view.</p>
<h3>Exception Handling</h3>
<p>Is build into the assets class and views so when an asset(texture, font) is not available a simple representation is shown.</p>
<h3>Extending the system</h3>
<p>A design is good if it is easy to add functionality without too much effort. Let's have a look at some examples:</p>
<p><b>How difficult is it to add a new type of <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a></b></p>
<p>Let's go wild and we want a completely new alien that travels once from left to right on the screen:</p>
<ul>
<li>Create a new view which represents the <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a>.</li>
<li>Create a new function in the <a class="el" href="class_alien.html" title="The Alien Entity. ">Alien</a> factory which creates our new alien, give it a special name by using the setName function, and change the speed. Of course we use our new view.</li>
<li>Change the move Aliens function in the motion controller to move this type of alien only left or right.</li>
<li>Add an <a class="el" href="class_alien_factory.html" title="A factory for building Aliens. ">AlienFactory</a> to the <a class="el" href="class_game.html" title="An Entity representing the Game, only one should be made. ">Game</a> <a class="el" href="class_controller.html" title="The library for Controllers. ">Controller</a>'s startgame function and let it create our new alien at random moments.</li>
</ul>
<p>That's it! Now our new alien can be killed and so add points to our gun, it can move, it can shoot bullets. Average time to build this? Maybe one hour.</p>
<p><b>How difficult is it to add a multiplayer mode?</b></p>
<ul>
<li>Add a new gun in the game build up process, this is just one line of code.</li>
<li>Add to the movegun function in the motion controller an index to specify the gun, 6 lines of code.</li>
<li>Add to the event controller the events for moving our second gun, 6 lines of code.</li>
<li>Check in the startgame function in game controller if one of the controllers is dead instead of one, 4 lines of code.</li>
<li>Add in the build up process a infoView connected to the second gun to show it's lives and score, 3 lines of code.</li>
</ul>
<p>Total 20 lines of code, looks quite good. Some things maybe need to be changed like the explanation for the users in the startview what the controls are for the two guns(at this moment it describes only the controls for one gun), but with this 20 lines a working multiplayer option can be implemented.</p>
<p><b>How difficult is it to add a wall that moves?</b></p>
<ul>
<li>Add a move function to motion controller, 10 lines of code.</li>
<li>Call this function in the gamecontroller when the aliens move, 1 line of code.</li>
</ul>
<p>No more to do. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
        </div>
        <div id="footer-container">
            <div id="footer">
                Copyright © Ruben Van Assche &nbsp;::&nbsp;
                Documentation generated by <a href="http://www.doxygen.org/" title="doxygen website">doxygen</a> &nbsp;::&nbsp;
                Theme by SFML(Laurent Gomila)
            </div>
        </div>
    </body>
</html>
